(this["webpackJsonpvideo-orientation"]=this["webpackJsonpvideo-orientation"]||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},16:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var i,a,s=n(1),r=n.n(s),o=n(9),c=n.n(o),d=(n(14),n(2)),l=n(8),h=n(3),j=n(4),u=n(6),m=n(5),f=(n(15),n(16),n(0));!function(e){e.Portrait="portrait",e.Landscape="landscape"}(i||(i={})),function(e){e.Contain="contain",e.Cover="cover"}(a||(a={}));var p=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(h.a)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).videoElementRef=Object(s.createRef)(),e.resizeObserver=new ResizeObserver((function(){return e.manageVideoOrientation()})),e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){this.resizeObserver.observe(this.videoElement)}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.orientation,i=t.stream,a=t.delta;return e.delta!==a||e.orientation!==n||e.stream!==i}},{key:"componentDidUpdate",value:function(){this.manageVideoOrientation()}},{key:"videoElement",get:function(){return this.videoElementRef.current}},{key:"manageVideoOrientation",value:function(){if(this.videoElement){var e=this.props,t=e.stream,n=e.delta,i=e.informationHandle,s=this.getVideoElementOrientation(),r=this.getStreamOrientation(),o=this.getAspectRationDelta(),c=a.Contain;"screen"===t.type?c=a.Contain:(s===r||o<=n)&&(c=a.Cover),i({fitMode:c,elementOrientation:s,streamOrientation:r,aspectRatioDelta:o.toPrecision(3)}),this.videoElement.style.objectFit=c}}},{key:"getVideoElementOrientation",value:function(){return this.videoElement?this.getOrientation(this.videoElement.offsetWidth,this.videoElement.offsetHeight):i.Landscape}},{key:"getStreamOrientation",value:function(){return this.getOrientation(this.posterWidth,this.posterHeight)}},{key:"getOrientation",value:function(e,t){return e>=t?i.Landscape:i.Portrait}},{key:"getAspectRationDelta",value:function(){var e=this.videoElement.offsetWidth/this.videoElement.offsetHeight,t=this.posterWidth/this.posterHeight;return Math.abs(e-t)}},{key:"posterWidth",get:function(){var e=this.props,t=e.orientation,n=e.stream;return t===i.Landscape?n.width:n.height}},{key:"posterHeight",get:function(){var e=this.props,t=e.orientation,n=e.stream;return t===i.Landscape?n.height:n.width}},{key:"render",value:function(){var e="https://picsum.photos/id/1074/".concat(this.posterWidth,"/").concat(this.posterHeight);return Object(f.jsx)("video",{className:"player",ref:this.videoElementRef,poster:e})}}]),n}(s.Component),b=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){var i;return Object(h.a)(this,n),(i=t.call(this,e)).dimensionsList={vga:{width:640,height:480},wga:{width:800,height:480},hd:{width:1280,height:720},wxga:{width:1280,height:800},fhd:{width:1920,height:1080}},i.state={orientation:"portrait",dimensions:"vga",delta:.6,information:{}},i}return Object(j.a)(n,[{key:"formChangeHandle",value:function(e,t){this.setState(Object(l.a)(Object(l.a)({},this.state),{},Object(d.a)({},e,t)))}},{key:"stream",get:function(){return this.dimensionsList[this.state.dimensions]}},{key:"informationHandle",value:function(e){this.setState({information:e})}},{key:"render",value:function(){var e=this,t=this.state,n=t.information,i=t.orientation,a=t.dimensions,s=t.delta;return Object(f.jsxs)("div",{className:"app",children:[Object(f.jsx)("main",{className:"app__main",children:Object(f.jsx)(p,{poster:null,stream:this.stream,orientation:i,delta:s,informationHandle:function(t){return e.informationHandle(t)}})}),Object(f.jsxs)("aside",{className:"app__aside",children:[Object(f.jsxs)("form",{name:"settings",children:[Object(f.jsxs)("fieldset",{children:[Object(f.jsx)("legend",{children:"Video orientation"}),Object(f.jsxs)("label",{children:[Object(f.jsx)("input",{type:"radio",name:"orientation",value:"portrait",defaultChecked:"portrait"===i,onChange:function(){return e.formChangeHandle("orientation","portrait")}}),Object(f.jsx)("span",{children:"Portrait"})]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("input",{type:"radio",name:"orientation",value:"landscape",defaultChecked:"landscape"===i,onChange:function(){return e.formChangeHandle("orientation","landscape")}}),Object(f.jsx)("span",{children:"Landscape"})]})]}),Object(f.jsxs)("fieldset",{children:[Object(f.jsx)("legend",{children:"Webcam Dimensions"}),Object(f.jsxs)("label",{children:[Object(f.jsx)("input",{type:"radio",name:"dimensions",value:"vga",defaultChecked:"vga"===a,onChange:function(){return e.formChangeHandle("dimensions","vga")}}),Object(f.jsx)("span",{children:"640\xd7480"})]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("input",{type:"radio",name:"dimensions",value:"wga",defaultChecked:"wga"===a,onChange:function(){return e.formChangeHandle("dimensions","wga")}}),Object(f.jsx)("span",{children:"800\xd7480"})]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("input",{type:"radio",name:"dimensions",value:"hd",defaultChecked:"hd"===a,onChange:function(){return e.formChangeHandle("dimensions","hd")}}),Object(f.jsx)("span",{children:"1280\xd7720"})]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("input",{type:"radio",name:"dimensions",value:"wxga",defaultChecked:"wxga"===a,onChange:function(){return e.formChangeHandle("dimensions","wxga")}}),Object(f.jsx)("span",{children:"1280\xd7800"})]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("input",{type:"radio",name:"dimensions",value:"fhd",defaultChecked:"fhd"===a,onChange:function(){return e.formChangeHandle("dimensions","fhd")}}),Object(f.jsx)("span",{children:"1920\xd71080"})]})]}),Object(f.jsxs)("fieldset",{children:[Object(f.jsx)("legend",{children:"Delta"}),Object(f.jsx)("label",{children:Object(f.jsx)("input",{name:"delta",type:"number",min:"0",max:"20",step:"0.1",defaultValue:s,onChange:function(t){return e.formChangeHandle("delta",t.target.valueAsNumber)}})})]})]}),Object(f.jsxs)("fieldset",{children:[Object(f.jsx)("legend",{children:"Information"}),Object(f.jsxs)("ul",{children:[Object(f.jsxs)("li",{children:["Video orientation: ",Object(f.jsx)("strong",{children:n.streamOrientation})]}),Object(f.jsxs)("li",{children:["Element orientation: ",Object(f.jsx)("strong",{children:n.elementOrientation})]}),Object(f.jsxs)("li",{children:["Aspect ratio delta: ",Object(f.jsx)("strong",{children:n.aspectRatioDelta})]}),Object(f.jsxs)("li",{children:["Selected delta: ",Object(f.jsx)("strong",{children:s})]}),Object(f.jsxs)("li",{children:["Selected fit mode: ",Object(f.jsx)("strong",{children:n.fitMode})]})]})]}),Object(f.jsxs)("fieldset",{children:[Object(f.jsx)("legend",{children:"Note"}),Object(f.jsxs)("p",{children:["If the video element and the stream have ",Object(f.jsx)("strong",{children:"different orientations"}),", the allowable delta between the aspect ratio of the video element and the stream is taken into account."]}),Object(f.jsx)("p",{children:"This allows us to ignore small differences in aspect ratio."}),Object(f.jsx)("p",{children:'The larger the allowed delta, the later it will switch to "contain" mode.'}),Object(f.jsx)("p",{children:"Set delta to zero to switch modes immediately."})]})]})]})}}]),n}(s.Component);c.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(b,{})}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.44793981.chunk.js.map